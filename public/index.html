<!DOCTYPE html>
<html>
<head>
  <title>Internet Waster</title>
</head>
<body>
  <div id="counter">Total Data Fetched: 0.00 MB</div>
  <button onclick="start()">Start Downloading</button>

  <script>
    let total = 0;
    let fileURL = "";

    async function getURLs() {
      const res = await fetch('/api/urls');
      const data = await res.json();
      fileURL = data.fileURL;
    }

    async function wasteOnce() {
      try {
        const res = await fetch(fileURL, { cache: "no-store" });
        const blob = await res.blob();
        total += blob.size / (1024 * 1024); // Convert to MB
        document.getElementById("counter").innerText = `Total Data Fetched: ${total.toFixed(2)} MB`;
      } catch (e) {
        console.error("Error wasting data:", e);
      }
    }

    function start() {
      setInterval(wasteOnce, 3000);
    }

    getURLs();
  </script>
</body>
</html>
